<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Testing - VolFlow</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 3px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        button { margin: 5px; padding: 8px 15px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>VolFlow Module Testing</h1>
    
    <div class="test-section">
        <h2>1. WebSocket Manager Test</h2>
        <button onclick="testWebSocketManager()">Test WebSocket Manager</button>
        <div id="websocket-result" class="test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>2. Watchlist Manager Test</h2>
        <button onclick="testWatchlistManager()">Test Watchlist Manager</button>
        <div id="watchlist-result" class="test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>3. Positions Manager Test</h2>
        <button onclick="testPositionsManager()">Test Positions Manager</button>
        <div id="positions-result" class="test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>4. Strategy Manager Test</h2>
        <button onclick="testStrategyManager()">Test Strategy Manager</button>
        <div id="strategy-result" class="test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>5. Risk Manager Test</h2>
        <button onclick="testRiskManager()">Test Risk Manager</button>
        <div id="risk-result" class="test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>6. Settings Manager Test</h2>
        <button onclick="testSettingsManager()">Test Settings Manager</button>
        <div id="settings-result" class="test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>7. Analytics Manager Test</h2>
        <button onclick="testAnalyticsManager()">Test Analytics Manager</button>
        <div id="analytics-result" class="test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>8. Main App Controller Test</h2>
        <button onclick="testAppController()">Test App Controller</button>
        <div id="app-result" class="test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>All Tests</h2>
        <button onclick="runAllTests()">Run All Tests</button>
        <div id="all-tests-result" class="test-result"></div>
    </div>

    <!-- Load all modules -->
    <script src="js/websocket-manager.js"></script>
    <script src="js/watchlist-manager.js"></script>
    <script src="js/positions-manager.js"></script>
    <script src="js/strategy-manager.js"></script>
    <script src="js/risk-manager.js"></script>
    <script src="js/settings-manager.js"></script>
    <script src="js/analytics-manager.js"></script>
    <script src="js/app.js"></script>

    <script>
        // Test functions for each module
        function testWebSocketManager() {
            const resultDiv = document.getElementById('websocket-result');
            try {
                // Test if WebSocketManager class exists and can be instantiated
                const wsManager = new WebSocketManager();
                
                // Test basic properties and methods
                const hasRequiredMethods = [
                    'connect', 'disconnect', 'send', 'subscribe', 'on', 'emit'
                ].every(method => typeof wsManager[method] === 'function');
                
                if (hasRequiredMethods) {
                    resultDiv.innerHTML = '<div class="success">✅ WebSocketManager: Class loaded, all required methods present</div>';
                } else {
                    resultDiv.innerHTML = '<div class="error">❌ WebSocketManager: Missing required methods</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">❌ WebSocketManager: Error - ${error.message}</div>`;
            }
        }
        
        function testWatchlistManager() {
            const resultDiv = document.getElementById('watchlist-result');
            try {
                const watchlistManager = new WatchlistManager();
                
                const hasRequiredMethods = [
                    'addSymbol', 'removeSymbol', 'refreshWatchlist', 'updateFromWebSocket'
                ].every(method => typeof watchlistManager[method] === 'function');
                
                if (hasRequiredMethods) {
                    resultDiv.innerHTML = '<div class="success">✅ WatchlistManager: Class loaded, all required methods present</div>';
                } else {
                    resultDiv.innerHTML = '<div class="error">❌ WatchlistManager: Missing required methods</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">❌ WatchlistManager: Error - ${error.message}</div>`;
            }
        }
        
        function testPositionsManager() {
            const resultDiv = document.getElementById('positions-result');
            try {
                const positionsManager = new PositionsManager();
                
                const hasRequiredMethods = [
                    'refreshPositions', 'updateFromWebSocket', 'getCurrentEquity', 'getActivePositionsCount'
                ].every(method => typeof positionsManager[method] === 'function');
                
                if (hasRequiredMethods) {
                    resultDiv.innerHTML = '<div class="success">✅ PositionsManager: Class loaded, all required methods present</div>';
                } else {
                    resultDiv.innerHTML = '<div class="error">❌ PositionsManager: Missing required methods</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">❌ PositionsManager: Error - ${error.message}</div>`;
            }
        }
        
        function testStrategyManager() {
            const resultDiv = document.getElementById('strategy-result');
            try {
                const strategyManager = new StrategyManager();
                
                const hasRequiredMethods = [
                    'refreshStrategies', 'updateFromWebSocket', 'initializeStrategyControls'
                ].every(method => typeof strategyManager[method] === 'function');
                
                if (hasRequiredMethods) {
                    resultDiv.innerHTML = '<div class="success">✅ StrategyManager: Class loaded, all required methods present</div>';
                } else {
                    resultDiv.innerHTML = '<div class="error">❌ StrategyManager: Missing required methods</div>';
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">❌ StrategyManager: Error - ${error.message}</div>`;
            }
        }
        
        function testRiskManager() {
            const resultDiv = document.getElementById('risk-result');
            try {
                const riskManager = new RiskManager();
                
                const hasRequiredMethods = [
